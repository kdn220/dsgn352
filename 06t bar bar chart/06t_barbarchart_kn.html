<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>d3 blank page</title>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
          <style>
            body {
              background-color: #eee;
            }
            svg {
              background-color: white;
            }
            .axis path,
            .axis line {
              fill: none;
              stroke: black;
              shape-rendering: crispEdges;
            }
            .axis text {
              font: 10px Arial;
            }
          </style>
    </head>
    <body>
        <script type="text/javascript">

//width / height
            var width = 600;
            var height = 400;
            var padding = 25;
            var dataset;

// CSV data
            d3.csv ( "bars.csv", function ( error, data ) {

                if ( error ) {
                    console.log ( "There was an error." ) ;
                } else {
                    dataset = data ;
                    draw_data_viz () ;
                }
            }) ;

// bind data to bars
    function draw_data_viz ( ) {
        var scale_multiplier = 20 ;
        var bar_padding = 2 ;

        //x scale functions
        var xScale = d3.scale.ordinal()
                .domain(d3.range(dataset.length))
                .rangeRoundBands([padding, width - padding], 0.05);

        var svg = d3.select("body")
                .append("svg")
                .attr("width", width )
                .attr("height", height );


        d3
                .select("svg")
                .selectAll("rect")
                .data(dataset)
                .enter()
                .append("rect")
                .attr("class", "bar")
                .style("height", function ( data ) {
                    // console.log ( data ) ;
                    return data.Rating * scale_multiplier ;
                })
                .style("width", function ( data, index ) {
                    return ( width / dataset.length ) - bar_padding ;
                })
                .attr("fill","purple")// FIXME: change to something else
                .attr("x", function ( data, index ) {
                    return index*(width / dataset.length ) ;
                })
                .attr("y", function ( data ) {
                    return height - (data.Rating * scale_multiplier) ;

                }) ;


//                .style("height", function (d) {
//                    var barHeight = d * 5;
//                    return barHeight + "px";
//                });
    }


//
//// scale
//
//// define x-axis - Bars
//
//var x = d3.scale.ordinal()
//  .domain([])
//  .rangePoints([0,width])
//
//
//
//var xAxis = d3.svg.axis()
//              .scale(xScale)
//              .orient("bottom")
//              .ticks(5);
//
//// define y-axis - Rating
//
//
//
//var xAxis = d3.svg.axis()
//              .scale(yScale)
//              .orient("left")
//              .ticks(5);
//
//}
//
//// generate axes
//  var axis = d3.svg.axis()
//    .scale(scale);
//
//  svg.append("g")
//    .call(axis);

        </script>
    </body>
</html>
